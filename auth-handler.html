<!DOCTYPE html>
<html>
<head>
    <title>Authentication Handler</title>
    <script>
        // Extract user data from URL hash
        const hash = window.location.hash.substring(1);
        const params = new URLSearchParams(hash);
        const user = {};
        
        for (const [key, value] of params.entries()) {
            user[key] = value;
        }

        // Send data back to main window
        if (window.opener) {
            window.opener.postMessage({
                type: 'telegram-auth',
                user: user
            }, 'https://brightoc.github.io/Login-with-telegram');
            
            window.close();
        } else {
            document.body.innerHTML = `
                <div style="text-align: center; padding: 40px;">
                    <h2>Authentication Complete</h2>
                    <p>You can safely close this window and return to the application.</p>
                    <button onclick="window.close()" style="
                        background: #0088cc;
                        color: white;
                        border: none;
                        padding: 10px 20px;
                        border-radius: 4px;
                        cursor: pointer;
                        margin-top: 20px;
                    ">Close Window</button>
                </div>
            `;
        }
    </script>
</head>
<body>
    <p>Processing authentication...</p>
</body>
</html>
